<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Experts Live Emirates - Attendee Frame</title>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1e3a5f 0%, #2d5a7b 50%, #1a4d6d 100%);
        min-height: 100vh;
        padding: 0;
        position: relative;
        overflow-x: hidden;
    }

    /* Animated background particles */
    .particle {
        position: fixed;
        background: rgba(100, 150, 255, 0.1);
        border-radius: 50%;
        animation: float 15s infinite;
        pointer-events: none;
    }

    @keyframes float {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        33% { transform: translate(30px, -30px) rotate(120deg); }
        66% { transform: translate(-20px, 20px) rotate(240deg); }
    }

    .header {
        background: linear-gradient(135deg, #2d4a6a 0%, #4a7ba7 100%);
        padding: 50px 20px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .header h1 {
        color: white;
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    }

    .header p {
        color: rgba(255,255,255,0.9);
        font-size: 1.2em;
    }

    .header .organizer {
        color: rgba(255,255,255,0.8);
        font-size: 1em;
        margin-top: 10px;
        font-style: italic;
    }

    .main-container {
        max-width: 1400px;
        margin: 40px auto;
        padding: 0 20px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        align-items: start;
    }

    .form-section {
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }

    .preview-section {
        background: rgba(255, 255, 255, 0.95);
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        position: sticky;
        top: 20px;
    }

    .form-group {
        margin-bottom: 25px;
    }

    .form-group label {
        display: block;
        color: #2d4a6a;
        font-weight: 600;
        margin-bottom: 8px;
        font-size: 0.95em;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .form-group label .required {
        color: #e74c3c;
    }

    .form-group input {
        width: 100%;
        padding: 14px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: #f8f9fa;
    }

    .form-group input:focus {
        outline: none;
        border-color: #4a7ba7;
        background: white;
        box-shadow: 0 0 0 3px rgba(74, 123, 167, 0.1);
    }

    .upload-area {
        border: 3px dashed #4a7ba7;
        border-radius: 15px;
        padding: 40px;
        text-align: center;
        background: #f0f8ff;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .upload-area:hover {
        background: #e6f2ff;
        border-color: #2d5a7b;
    }

    .upload-area p {
        color: #2d4a6a;
        font-weight: 600;
        margin-bottom: 5px;
    }

    .upload-area small {
        color: #666;
        font-size: 0.9em;
    }

    .frame-preview {
        width: 100%;
        max-width: 500px;
        margin: 0 auto 20px;
        background: #1a1a2e;
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }

    .badge-container {
        position: relative;
        aspect-ratio: 16/9;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        border-radius: 15px;
        padding: 25px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .badge-left {
        flex: 1;
        color: white;
    }

    .badge-title {
        color: #4a9eff;
        font-size: 1.1em;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .badge-event {
        font-size: 2em;
        font-weight: bold;
        color: #4ac3ff;
        line-height: 1.2;
        margin-bottom: 8px;
    }

    .badge-tagline {
        font-size: 0.85em;
        color: #bbb;
        margin-bottom: 15px;
    }

    .badge-date {
        background: rgba(74, 195, 255, 0.2);
        padding: 8px 15px;
        border-radius: 8px;
        display: inline-block;
        font-size: 0.9em;
        margin-top: 10px;
    }

    .badge-right {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
    }

    .photo-circle {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        border: 4px solid #4a9eff;
        position: relative;
    }

    canvas {
        border-radius: 50%;
        cursor: grab;
    }

    canvas:active {
        cursor: grabbing;
    }

    .placeholder-circle {
        color: #ccc;
        font-size: 3em;
    }

    .attendee-label {
        color: #4a9eff;
        font-size: 1.2em;
        font-weight: bold;
        writing-mode: vertical-rl;
        text-orientation: mixed;
        letter-spacing: 3px;
    }

    .user-info {
        background: rgba(255,255,255,0.1);
        padding: 15px;
        border-radius: 10px;
        margin-top: 15px;
        text-align: center;
        min-height: 80px;
    }

    .user-name {
        font-size: 1.3em;
        font-weight: bold;
        color: white;
        margin-bottom: 5px;
    }

    .user-job {
        font-size: 0.95em;
        color: #4ac3ff;
        margin-bottom: 3px;
    }

    .user-company {
        font-size: 0.9em;
        color: #aaa;
    }

    .controls {
        margin-top: 15px;
        display: none;
    }

    .controls.active {
        display: block;
    }

    .controls label {
        display: block;
        color: #555;
        font-weight: 600;
        margin-bottom: 8px;
        font-size: 0.9em;
    }

    input[type="range"] {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: #ddd;
        outline: none;
        -webkit-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #4a7ba7;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    input[type="range"]::-moz-range-thumb {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #4a7ba7;
        cursor: pointer;
        border: none;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .action-buttons {
        display: none;
        gap: 15px;
        margin-top: 20px;
    }

    .action-buttons.active {
        display: flex;
    }

    .btn {
        padding: 14px 28px;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }

    .btn-linkedin {
        background: #0077b5;
        color: white;
    }

    .btn-linkedin:hover {
        background: #006097;
    }

    .caption-box {
        background: #f8f9fa;
        border: 2px solid #e0e0e0;
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
        display: none;
    }

    .caption-box.active {
        display: block;
    }

    .caption-box h3 {
        color: #2d4a6a;
        font-size: 1.1em;
        margin-bottom: 10px;
    }

    .caption-text {
        background: white;
        padding: 15px;
        border-radius: 8px;
        color: #333;
        line-height: 1.6;
        margin-bottom: 10px;
        font-size: 0.95em;
        border: 1px solid #ddd;
    }

    .btn-copy {
        background: #28a745;
        color: white;
        width: 100%;
    }

    .btn-copy:hover {
        background: #218838;
    }

    .hint {
        text-align: center;
        color: #666;
        font-size: 0.85em;
        margin-top: 10px;
        font-style: italic;
    }

    @media (max-width: 1024px) {
        .main-container {
            grid-template-columns: 1fr;
        }

        .preview-section {
            position: relative;
            top: 0;
        }
    }
</style>
</head>
<body>

<!-- Animated background particles -->
<script>
    for(let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        const size = Math.random() * 80 + 30;
        particle.style.width = size + 'px';
        particle.style.height = size + 'px';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 15 + 's';
        particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
        document.body.appendChild(particle);
    }
</script>

<div class="header">
    <h1>EduHack-4 - Attendee Frame</h1>
    <p>Create your personalized event badge</p>
    <p class="organizer">Made by Sahaba Club</p>
</div>

<div class="main-container">
    <div class="form-section">
        <div class="form-group">
            <label>FULL NAME <span class="required">*</span></label>
            <input type="text" id="fullName" placeholder="Enter your full name">
        </div>

        <div class="form-group">
            <label>STUDENT OR WORKING</label>
            <input type="text" id="jobTitle" placeholder="e.g., Student, Software Engineer, etc.">
        </div>

        <div class="form-group">
            <label>COMPANY OR UNIVERSITY</label>
            <input type="text" id="company" placeholder="Enter your company or university name">
        </div>

        <div class="form-group">
            <label>PROFILE PHOTO <span class="required">*</span></label>
            <div class="upload-area" onclick="document.getElementById('upload').click()">
                <p>üì∏ CLICK TO UPLOAD YOUR PHOTO</p>
                <small>SUPPORTS JPG, PNG, WEBP (SQUARE FORMAT RECOMMENDED)</small>
            </div>
            <input type="file" id="upload" accept="image/*" style="display:none;">
        </div>
    </div>

    <div class="preview-section">
        <div class="frame-preview">
            <div class="badge-container">
                <div class="badge-left">
                    <div class="badge-title">EduHack-4</div>
                    <div class="badge-event">TECH<br>HACKATHON</div>
                    <div class="badge-tagline">Innovate ‚Ä¢ Create ‚Ä¢ Lead</div>
                    <div class="badge-date">üìÖ By Sahaba Club</div>
                </div>
                <div class="badge-right">
                    <div class="photo-circle">
                        <canvas id="canvas" width="172" height="172"></canvas>
                        <div class="placeholder-circle" id="placeholder">üë§</div>
                    </div>
                    <div class="attendee-label">ATTENDEE</div>
                </div>
            </div>
            <div class="user-info" id="userInfo">
                <div class="user-name" id="displayName">Your Name</div>
                <div class="user-job" id="displayJob">Your Job Title</div>
                <div class="user-company" id="displayCompany">Your Company</div>
            </div>
        </div>

        <div class="controls" id="controls">
            <label>üîç Zoom: <span id="zoomValue">100%</span></label>
            <input type="range" id="zoomSlider" min="50" max="300" value="100">
            <p class="hint">üí° Drag the photo to position it perfectly</p>
        </div>

        <div class="action-buttons" id="actionButtons">
            <button class="btn btn-linkedin" id="linkedinBtn">
                <span>üì±</span> Share on LinkedIn
            </button>
        </div>

        <div class="caption-box" id="captionBox">
            <h3>üìù LinkedIn Caption</h3>
            <div class="caption-text" id="captionText">
                üéâ Excited to be part of EduHack-4 organized by Sahaba Club! 
                
Ready to innovate, create, and collaborate with amazing minds in this tech hackathon.

#EduHack4 #SahabaClub #TechHackathon #Innovation #Coding #Technology #Learning
            </div>
            <button class="btn btn-copy" onclick="copyCaption()">
                üìã Copy Caption
            </button>
        </div>
    </div>
</div>

<script>
const uploadInput = document.getElementById("upload");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const placeholder = document.getElementById("placeholder");
const zoomSlider = document.getElementById("zoomSlider");
const zoomValue = document.getElementById("zoomValue");
const controlsDiv = document.getElementById("controls");
const actionButtons = document.getElementById("actionButtons");
const captionBox = document.getElementById("captionBox");
const linkedinBtn = document.getElementById("linkedinBtn");

const fullNameInput = document.getElementById("fullName");
const jobTitleInput = document.getElementById("jobTitle");
const companyInput = document.getElementById("company");
const displayName = document.getElementById("displayName");
const displayJob = document.getElementById("displayJob");
const displayCompany = document.getElementById("displayCompany");

let uploadedImage = null;
let imageScale = 1;
let imageX = 0;
let imageY = 0;
let isDragging = false;
let lastMouseX = 0;
let lastMouseY = 0;

// Update display names in real-time
fullNameInput.addEventListener("input", function() {
    displayName.textContent = this.value || "Your Name";
});

jobTitleInput.addEventListener("input", function() {
    displayJob.textContent = this.value || "Student/Working";
});

companyInput.addEventListener("input", function() {
    displayCompany.textContent = this.value || "Your Institution";
});

uploadInput.addEventListener("change", function(e) {
    const file = e.target.files[0];
    if (!file) return;

    const img = new Image();
    img.onload = function() {
        uploadedImage = img;
        imageScale = 1;
        imageX = 0;
        imageY = 0;
        zoomSlider.value = 100;
        
        drawImage();
        placeholder.style.display = 'none';
        controlsDiv.classList.add('active');
        
        // Wait a moment, then generate and download
        setTimeout(() => {
            downloadImage();
            // Show share buttons and caption after download
            actionButtons.classList.add('active');
            captionBox.classList.add('active');
        }, 500);
    };
    img.src = URL.createObjectURL(file);
});

zoomSlider.addEventListener("input", function() {
    imageScale = this.value / 100;
    zoomValue.textContent = this.value + '%';
    drawImage();
});

// Mouse drag functionality
canvas.addEventListener('mousedown', function(e) {
    if (!uploadedImage) return;
    isDragging = true;
    lastMouseX = e.offsetX;
    lastMouseY = e.offsetY;
});

canvas.addEventListener('mousemove', function(e) {
    if (!isDragging || !uploadedImage) return;
    
    const deltaX = e.offsetX - lastMouseX;
    const deltaY = e.offsetY - lastMouseY;
    
    imageX += deltaX;
    imageY += deltaY;
    
    lastMouseX = e.offsetX;
    lastMouseY = e.offsetY;
    
    drawImage();
});

canvas.addEventListener('mouseup', function() {
    isDragging = false;
});

canvas.addEventListener('mouseleave', function() {
    isDragging = false;
});

// Touch support
canvas.addEventListener('touchstart', function(e) {
    if (!uploadedImage) return;
    e.preventDefault();
    isDragging = true;
    const touch = e.touches[0];
    const rect = canvas.getBoundingClientRect();
    lastMouseX = touch.clientX - rect.left;
    lastMouseY = touch.clientY - rect.top;
});

canvas.addEventListener('touchmove', function(e) {
    if (!isDragging || !uploadedImage) return;
    e.preventDefault();
    
    const touch = e.touches[0];
    const rect = canvas.getBoundingClientRect();
    const touchX = touch.clientX - rect.left;
    const touchY = touch.clientY - rect.top;
    
    const deltaX = touchX - lastMouseX;
    const deltaY = touchY - lastMouseY;
    
    imageX += deltaX;
    imageY += deltaY;
    
    lastMouseX = touchX;
    lastMouseY = touchY;
    
    drawImage();
});

canvas.addEventListener('touchend', function() {
    isDragging = false;
});

function drawImage() {
    if (!uploadedImage) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.save();
    
    ctx.beginPath();
    ctx.arc(86, 86, 86, 0, Math.PI * 2);
    ctx.closePath();
    ctx.clip();

    const imgWidth = uploadedImage.width;
    const imgHeight = uploadedImage.height;
    const canvasSize = canvas.width;
    
    let drawWidth, drawHeight;
    
    if (imgWidth > imgHeight) {
        drawHeight = canvasSize * imageScale;
        drawWidth = (imgWidth / imgHeight) * drawHeight;
    } else {
        drawWidth = canvasSize * imageScale;
        drawHeight = (imgHeight / imgWidth) * drawWidth;
    }
    
    const offsetX = (canvasSize - drawWidth) / 2 + imageX;
    const offsetY = (canvasSize - drawHeight) / 2 + imageY;

    ctx.drawImage(uploadedImage, 0, 0, imgWidth, imgHeight, offsetX, offsetY, drawWidth, drawHeight);
    ctx.restore();
}

function downloadImage() {
    if (!uploadedImage) return;

    const finalCanvas = document.createElement('canvas');
    finalCanvas.width = 1920;
    finalCanvas.height = 1080;
    const finalCtx = finalCanvas.getContext('2d');

    // Background
    const gradient = finalCtx.createLinearGradient(0, 0, 1920, 1080);
    gradient.addColorStop(0, '#1a1a2e');
    gradient.addColorStop(1, '#16213e');
    finalCtx.fillStyle = gradient;
    finalCtx.fillRect(0, 0, 1920, 1080);

    // Left section text
    finalCtx.fillStyle = '#4a9eff';
    finalCtx.font = 'bold 42px Arial';
    finalCtx.fillText('EduHack-4', 80, 120);

    finalCtx.fillStyle = '#4ac3ff';
    finalCtx.font = 'bold 90px Arial';
    finalCtx.fillText('TECH', 80, 240);
    finalCtx.fillText('HACKATHON', 80, 340);

    finalCtx.fillStyle = '#bbb';
    finalCtx.font = '28px Arial';
    finalCtx.fillText('Innovate ‚Ä¢ Create ‚Ä¢ Lead', 80, 390);

    finalCtx.fillStyle = 'rgba(74, 195, 255, 0.3)';
    finalCtx.fillRect(80, 440, 280, 50);
    finalCtx.fillStyle = 'white';
    finalCtx.font = '26px Arial';
    finalCtx.fillText('By Sahaba Club', 100, 472);

    // Photo circle
    finalCtx.save();
    finalCtx.beginPath();
    finalCtx.arc(1520, 360, 240, 0, Math.PI * 2);
    finalCtx.closePath();
    finalCtx.strokeStyle = '#4a9eff';
    finalCtx.lineWidth = 12;
    finalCtx.stroke();
    finalCtx.clip();

    const scale = 480 / 172;
    const imgWidth = uploadedImage.width;
    const imgHeight = uploadedImage.height;
    
    let drawWidth, drawHeight;
    if (imgWidth > imgHeight) {
        drawHeight = 172 * imageScale * scale;
        drawWidth = (imgWidth / imgHeight) * drawHeight;
    } else {
        drawWidth = 172 * imageScale * scale;
        drawHeight = (imgHeight / imgWidth) * drawWidth;
    }
    
    const offsetX = 1520 - drawWidth/2 + (imageX * scale);
    const offsetY = 360 - drawHeight/2 + (imageY * scale);

    finalCtx.drawImage(uploadedImage, 0, 0, imgWidth, imgHeight, offsetX, offsetY, drawWidth, drawHeight);
    finalCtx.restore();

    // ATTENDEE label
    finalCtx.save();
    finalCtx.translate(1770, 540);
    finalCtx.rotate(Math.PI / 2);
    finalCtx.fillStyle = '#4a9eff';
    finalCtx.font = 'bold 38px Arial';
    finalCtx.letterSpacing = '8px';
    finalCtx.fillText('ATTENDEE', 0, 0);
    finalCtx.restore();

    // User info box
    finalCtx.fillStyle = 'rgba(255,255,255,0.1)';
    finalCtx.fillRect(80, 880, 1760, 140);

    finalCtx.fillStyle = 'white';
    finalCtx.font = 'bold 48px Arial';
    finalCtx.fillText(fullNameInput.value || 'Your Name', 120, 945);

    finalCtx.fillStyle = '#4ac3ff';
    finalCtx.font = '32px Arial';
    finalCtx.fillText(jobTitleInput.value || 'Student/Working', 120, 990);

    finalCtx.fillStyle = '#aaa';
    finalCtx.font = '28px Arial';
    finalCtx.fillText(companyInput.value || 'Your Institution', 120, 1025);

    // Download
    const link = document.createElement("a");
    link.download = "eduhack4-attendee-badge.png";
    link.href = finalCanvas.toDataURL("image/png");
    link.click();
}

linkedinBtn.addEventListener('click', function() {
    // Detect if mobile device
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    if (isMobile) {
        // For mobile, try the LinkedIn app deep link first, fallback to web
        const linkedinAppUrl = 'linkedin://shareArticle?mini=true';
        const linkedinWebUrl = 'https://www.linkedin.com/sharing/share-offsite/';
        
        // Try to open LinkedIn app
        window.location.href = linkedinAppUrl;
        
        // Fallback to web after a short delay if app doesn't open
        setTimeout(function() {
            window.open(linkedinWebUrl, '_blank');
        }, 500);
    } else {
        // Desktop - use the standard share URL
        window.open('https://www.linkedin.com/feed/?shareActive=true', '_blank');
    }
});

function copyCaption() {
    const caption = document.getElementById('captionText').textContent;
    navigator.clipboard.writeText(caption).then(function() {
        const btn = event.target;
        const originalText = btn.innerHTML;
        btn.innerHTML = '‚úÖ Copied!';
        setTimeout(() => {
            btn.innerHTML = originalText;
        }, 2000);
    });
}
</script>

</body>
</html>
